<!DOCTYPE html>
<html>
  <head>
    <title>Real-Time Editor</title>
    <link rel="stylesheet" type="text/css" href="styles.css" />
    <script defer type="text/javascript" src="app.js"></script>
    <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script> -->
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/split.js/1.0.0/split.min.js"
      integrity="sha512-tTsZnBXEzNdEaqUO9Ok8fUofS73xieiBa54pD/sxOSvayIgItM9MmEM0CnUjA13LDnJT22sfwmjf20+Bo2174g=="
      crossorigin="anonymous"
    ></script>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
  </head>
  <style>
    @import url("https://fonts.googleapis.com/css2?family=Open+Sans&display=swap");

    * {
      padding: 0;
      margin: 0;
      box-sizing: border-box;
    }

    body {
      height: 100vh;
      display: flex;
    }
    .container {
      background: #e7e7e7;
      display: flex;
      flex-direction: column;
      width: 50%;
      height: 100vh;
      margin: 3px;
    }
    .container textarea {
      background-color: #121212;
      border: 1px solid #0dddf0;
      resize: none;
      width: 100%;
      height: 50%;
      font-size: 1.4rem;
      padding: 10px;
      resize: vertical;
      overflow-y: scroll;
      color: white;
    }
    .container textarea:focus {
      outline: none;
      color: white;
    }
    .iframe-container {
      background: white;
      width: 50%;
      height: 100vh;
      margin: 3px;
    }
    #viewer {
      width: 100%;
      height: 100%;
    }
    .split {
      width: 100%;
      height: 100%;
    }
    .gutter {
      cursor: e-resize;
      height: 100%;
      background: grey;
    }
    .gutter.gutter-horizontal {
      cursor: ew-resize;
    }
  </style>
  <body>
    <div class="container split">
      <!-- Text area for Html Code  -->
      <textarea
        id="htmlCode"
        placeholder="Type HTML code here"
        spellcheck="false"
        oninput="update(0)"
        onkeydown="if(event.keyCode===9){var v=this.value,s=this.selectionStart,e=this.selectionEnd;this.value=v.substring(0, s)+'\t'+v.substring(e);this.selectionStart=this.selectionEnd=s+1;return false;}if(event.keyCode==8){update(1);}"
      >
      &#60;!DOCTYPE html>
      &#60;html lang="en" >
      &#60;head>
        &#60;meta charset="UTF-8">
        &#60;title>CodePen - Slider Animation&#60;/title>
        &#60;meta name="viewport" content="width=device-width, initial-scale=1">&#60;link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css'>&#60;link rel="stylesheet" href="./style.css">
      
      &#60;/head>
      &#60;body>
      &#60;div id="slider">
        &#60;section style="z-index: 1;">
          &#60;div>
            &#60;img src="https://images.unsplash.com/photo-1598538085731-05ab942009af?ixlib=rb-1.2.1&q=85&fm=jpg&crop=entropy&cs=srgb&ixid=eyJhcHBfaWQiOjE0NTg5fQ" alt="">
          &#60;/div>
        &#60;/section>
        &#60;section style="z-index: 2;">
          &#60;div>
            &#60;img src="https://images.unsplash.com/photo-1598534453620-3bd81406f672?ixlib=rb-1.2.1&q=85&fm=jpg&crop=entropy&cs=srgb&ixid=eyJhcHBfaWQiOjE0NTg5fQ" alt="">
          &#60;/div>
        &#60;/section>
        &#60;section>
          &#60;div>
            &#60;img src="https://images.unsplash.com/photo-1599423423924-1e1e4103a585?ixlib=rb-1.2.1&q=85&fm=jpg&crop=entropy&cs=srgb&ixid=eyJhcHBfaWQiOjE0NTg5fQ" alt="">
          &#60;/div>
        &#60;/section>
        &#60;section>
          &#60;div>
            &#60;img src="https://images.unsplash.com/photo-1599848742060-6f470c4efd16?ixlib=rb-1.2.1&q=85&fm=jpg&crop=entropy&cs=srgb&ixid=eyJhcHBfaWQiOjE0NTg5fQ" alt="">
          &#60;/div>
        &#60;/section>
        &#60;svg viewBox="0 0 512 512" width="100" title="arrow-circle-right" class="next">
          &#60;path d="M256 8c137 0 248 111 248 248S393 504 256 504 8 393 8 256 119 8 256 8zm-28.9 143.6l75.5 72.4H120c-13.3 0-24 10.7-24 24v16c0 13.3 10.7 24 24 24h182.6l-75.5 72.4c-9.7 9.3-9.9 24.8-.4 34.3l11 10.9c9.4 9.4 24.6 9.4 33.9 0L404.3 273c9.4-9.4 9.4-24.6 0-33.9L271.6 106.3c-9.4-9.4-24.6-9.4-33.9 0l-11 10.9c-9.5 9.6-9.3 25.1.4 34.4z" />
        &#60;/svg>
        &#60;svg viewBox="0 0 512 512" width="100" title="arrow-circle-left" class="prev">
          &#60;path d="M256 504C119 504 8 393 8 256S119 8 256 8s248 111 248 248-111 248-248 248zm28.9-143.6L209.4 288H392c13.3 0 24-10.7 24-24v-16c0-13.3-10.7-24-24-24H209.4l75.5-72.4c9.7-9.3 9.9-24.8.4-34.3l-11-10.9c-9.4-9.4-24.6-9.4-33.9 0L107.7 239c-9.4 9.4-9.4 24.6 0 33.9l132.7 132.7c9.4 9.4 24.6 9.4 33.9 0l11-10.9c9.5-9.5 9.3-25-.4-34.3z" />
        &#60;/svg>
      &#60;/div>
        &#60;script src='https://code.jquery.com/jquery-3.5.1.min.js'>&#60;/script>&#60;script  src="./script.js">&#60;/script>
      
      &#60;/body>
      &#60;/html>
      </textarea>
      <!-- Text area for Css Code  -->
      <textarea
        id="cssCode"
        placeholder="Type CSS code here"
        spellcheck="false"
        oninput="update(0)"
        onkeydown="if(event.keyCode===9){var v=this.value,s=this.selectionStart,e=this.selectionEnd;this.value=v.substring(0, s)+'\t'+v.substring(e);this.selectionStart=this.selectionEnd=s+1;return false;}if(event.keyCode==8){update(1);}"
      >
      body {
        margin: 0;
      }
      body #slider {
        overflow: hidden;
        position: relative;
        width: 100vw;
        height: 100vh;
      }
      body #slider section {
        position: absolute;
      }
      body #slider section div img {
        object-fit: cover;
        width: 100vw;
        height: 100vh;
      }
      body #slider .next,
      body #slider .prev {
        position: absolute;
        top: 50%;
        z-index: 50;
        cursor: pointer;
        height: 20vh;
      }
      body #slider .next path,
      body #slider .prev path {
        fill: #ffffff;
      }
      body #slider .next {
        right: 5%;
      }
      body #slider .prev {
        left: 5%;
      }
      @media (max-width: 768px) {
        body #slider .next, body #slider .prev {
          position: absolute;
          top: 50%;
          z-index: 50;
          cursor: pointer;
          height: 8vh;
          margin: -38px;
        }
      }
       
    </textarea
      >
      <textarea
        id="javascriptCode"
        spellcheck="false"
        placeholder="Type JavaScript code here"
        oninput="update(0)"
        onkeydown="if(event.keyCode===9){var v=this.value,s=this.selectionStart,e=this.selectionEnd;this.value=v.substring(0, s)+'\t'+v.substring(e);this.selectionStart=this.selectionEnd=s+1;return false;}if(event.keyCode==8){update(1);}"
      >
      $(document).ready(function () {
        var i = 1,
          counter = 0,
          place = 0;
        var animatedIn = "animate__backInRight";
        var animatedOut = "animate__backOutLeft";
        var animated = "animate__animated";
        var slideIn = "backInRight";
        var slideOut = "backOutLeft";
        var animatedInP = "animate__backInLeft";
        var animatedOutP = "animate__backOutRight";
        var slideInP = "backInLeft";
        var slideOutP = "backOutRight";
        var Childs = $("#slider section").length;
        const animateCSS = (element, animation, prefix = "animate__") =>
          new Promise((resolve, reject) => {
            const animationName = `${prefix}${animation}`;
            const node = document.querySelector(element);
            node.classList.add(`${prefix}animated`, animationName);
          });
        for (counter = Childs; counter > 0; counter--) {
          $("#slider section:nth-child(" + counter + ")").css("zIndex", (place += 1));
          // this if you want to slideing in or right with fade
          if (counter != 1) {
            $("#slider section:nth-child(" + counter + ")").css("opacity", "0");
          }
        }
        $(".next").click(function () {
          var cur = "#slider section:nth-child(" + i + ")";
          var next = "#slider section:nth-child(" + (i + 1) + ")";
          var firstChild = "#slider section:nth-child(1)";
          if (i == 1) {
            if ($(cur).hasClass(animatedOut) || $(cur).hasClass(animatedOutP)) {
              $(cur).removeClass();
              animateCSS(cur, slideIn);
            } else if ($(cur).hasClass(animatedIn) || $(cur).hasClass(animatedInP)) {
              $(cur).removeClass();
              animateCSS(cur, slideOut);
            } else {
              animateCSS(cur, slideOut);
            }
            if ($(next).hasClass(animatedOut) || $(next).hasClass(animatedOutP)) {
              $(next).removeClass();
              animateCSS(next, slideIn);
            } else if (
              $(next).hasClass(animatedIn) ||
              $(next).hasClass(animatedInP)
            ) {
              $(next).removeClass();
              animateCSS(next, slideOut);
            } else {
              animateCSS(next, slideIn);
            }
            i += 1;
          } else if (i == Childs) {
            $(cur).removeClass();
            animateCSS(cur, slideOut);
            i = 1;
            $(firstChild).removeClass();
            animateCSS(firstChild, slideIn);
          } else {
            if ($(cur).hasClass(animatedOut) || $(cur).hasClass(animatedOutP)) {
              $(cur).removeClass();
              animateCSS(cur, slideIn);
            } else {
              $(cur).removeClass();
              animateCSS(cur, slideOut);
            }
            if ($(next).hasClass(animatedIn) || $(next).hasClass(animatedInP)) {
              $(next).removeClass();
              animateCSS(next, slideOut);
            } else {
              $(next).removeClass();
              animateCSS(next, slideIn);
            }
            i += 1;
          }
        });
        $(".prev").click(function () {
          console.log(i);
          var cur = "#slider section:nth-child(" + i + ")";
          var prev = "#slider section:nth-child(" + (i - 1) + ")";
          var lastChild = "#slider section:nth-child(" + Childs + ")";
          if (i == 1) {
            if ($(cur).hasClass(animatedOut) || $(cur).hasClass(animatedOutP)) {
              $(cur).removeClass();
              animateCSS(cur, slideInP);
            } else if ($(cur).hasClass(animatedIn) || $(cur).hasClass(animatedInP)) {
              $(cur).removeClass();
              animateCSS(cur, slideOutP);
            } else {
              animateCSS(cur, slideOutP);
            }
            if (
              $(lastChild).hasClass(animatedOut) ||
              $(lastChild).hasClass(animatedOutP)
            ) {
              $(lastChild).removeClass();
              animateCSS(lastChild, slideInP);
            } else if (
              $(lastChild).hasClass(animatedIn) ||
              $(lastChild).hasClass(animatedInP)
            ) {
              $(lastChild).removeClass();
              animateCSS(lastChild, slideOutP);
            } else {
              animateCSS(lastChild, slideInP);
            }
            i = Childs;
          } else if (i == 2) {
            if ($(cur).hasClass(animatedOut) || $(cur).hasClass(animatedOutP)) {
              $(cur).removeClass();
              animateCSS(cur, slideInP);
            } else {
              $(cur).removeClass();
              animateCSS(cur, slideOutP);
            }
            if ($(prev).hasClass(animatedIn) || $(prev).hasClass(animatedInP)) {
              $(prev).removeClass();
              animateCSS(prev, slideOutP);
            } else {
              $(prev).removeClass();
              animateCSS(prev, slideInP);
            }
            i -= 1;
          } else {
            if ($(cur).hasClass(animatedOut) || $(cur).hasClass(animatedOutP)) {
              $(cur).removeClass();
              animateCSS(cur, slideInP);
            } else {
              $(cur).removeClass();
              animateCSS(cur, slideOutP);
            }
            if ($(prev).hasClass(animatedIn) || $(prev).hasClass(animatedInP)) {
              $(prev).removeClass();
              animateCSS(prev, slideOutP);
            } else {
              $(prev).removeClass();
              animateCSS(prev, slideInP);
            }
            i -= 1;
          }
        });
      });</textarea
      >
    </div>
    <button
      class="btn btn-primary"
      style="position: absolute; top: 10px; right: 10px"
      onclick="update(0)"
    >
      Run
    </button>
    <div class="iframe-container split">
      <iframe id="viewer"></iframe>
    </div>
  </body>
  <script>
    var j = 0;
    //Function for live Rendering
    function update(i) {
      if (i == 0) {
        let htmlCode = document.getElementById("htmlCode").value;
        let cssCode = document.getElementById("cssCode").value;
        let javascriptCode = document.getElementById("javascriptCode").value;
        let text =
          htmlCode +
          "<style>" +
          cssCode +
          "</style>" +
          "<scri" +
          "pt>" +
          javascriptCode +
          "</scri" +
          "pt>";
        let iframe = document.getElementById("viewer").contentWindow.document;
        iframe.open();
        iframe.write(text);
        iframe.close();
      } else if (i == 1) {
        let htmlCode = document.getElementById("htmlCode").value;
        let html = htmlCode.slice(0, htmlCode.length);
        document.getElementById("htmlCode").value = html;
        j = 1;
      }
    }
  </script>
</html>
